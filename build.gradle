subprojects {
  apply plugin: 'java'

  plugins.withId('java') {

    repositories {
      mavenCentral()
    }

//    toolchain {
//      languageVersion = JavaLanguageVersion.of(11)
//    }

    tasks.withType(JavaCompile) { task ->
      task.options.encoding = 'UTF-8'
    }

    dependencies {
      // compile 'javax.annotation:javax.annotation-api:1.3.2'
      implementation 'com.google.guava:guava:25.0-jre'
      testImplementation 'org.junit.jupiter:junit-jupiter-api:5+'
      testImplementation 'org.junit.jupiter:junit-jupiter-params:5+'
      testImplementation 'org.junit.jupiter:junit-jupiter-engine:5+'
    }

    configurations.all {
      resolutionStrategy {
        dependencySubstitution {
          // substitute module("javax.annotation:jsr250-api") with module("javax.annotation:javax.annotation-api:1.3.2")
          // substitute module("javax.annotation:jsr305") with module("javax.annotation:javax.annotation-api:1.3.2")
          // substitute module("com.google.code.findbugs:jsr305") with module("javax.annotation:javax.annotation-api:1.3.2")
        }
      }
    }

    task sourcesJar(type: Jar) {
        classifier 'sources'
        from sourceSets.main.allSource
    }

    task testsJar(type: Jar) {
        classifier 'tests'
        from sourceSets.test.output
    }

    artifacts {
        archives tasks.sourcesJar
        archives tasks.testsJar
    }
  }
}
